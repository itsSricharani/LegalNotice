<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Analyze Legal Notice</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="top-bar">
    <div class="logo">
        <a href="index.html">
            <img src="logo.png" alt="Logo">
        </a>
    </div>
</header>

<<main class="hero">
    <div class="hero-text">
        <h1>Analyze a Legal Notice</h1>

        <p>
            Paste the legal notice text below or upload a PDF document.
            The system will extract key information in simple language.
        </p>

        <textarea id="noticeText"
                  placeholder="Paste legal notice text here..."></textarea>

        <div class="file-input">
            <input type="file" id="pdfFile" accept=".pdf">
        </div>

        <button class="primary-btn" onclick="analyzeNotice()">Analyze</button>
    </div>

    <div class="hero-visual notice-image">
        <img src="comdoc.png" class="img-base">
        <img src="simdoc.png" class="img-hover">
    </div>
</main>

<section class="content">
    <div id="results" class="results hidden">
        ...
    </div>
</section>



<script>
async function analyzeNotice() {
    const text = document.getElementById("noticeText").value.trim();
    const file = document.getElementById("pdfFile").files[0];

    let response;

    if (file) {
        const formData = new FormData();
        formData.append("file", file);

        response = await fetch("http://127.0.0.1:5000/analyze-pdf", {
            method: "POST",
            body: formData
        });
    } else if (text.length > 0) {
        response = await fetch("http://127.0.0.1:5000/analyze", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ text })
        });
    } else {
        alert("Please paste text or upload a PDF.");
        return;
    }

    const data = await response.json();

    document.getElementById("summary").innerText = data.summary || "Unknown";
    document.getElementById("intent").innerText = data.intent || "Unknown";
    document.getElementById("deadline").innerText = data.deadline || "Not found";
    document.getElementById("risk").innerText = data.risk || "Unknown";

    document.getElementById("results").classList.remove("hidden");
}
</script>

<script>
    window.addEventListener("load", () => {
        document.body.classList.add("loaded");
    });
</script>

</body>
</html>
